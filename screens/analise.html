<div class="page" data-screen-title="Análise Fina">
  <div class="dashboard-header">
    <p class="subtitle">Métricas detalhadas por ticker — base de dados completa</p>
  </div>

  <!-- KPIs -->
  <div class="analysis-summary">
    <div class="card info">
      <div class="card-content">
        <div>
          <p class="label">Nº de Tickers</p>
          <p class="value" id="anTotalTickers">0</p>
        </div>
        <div class="icon-box"><i class="fas fa-database"></i></div>
      </div>
    </div>
    <div class="card success">
      <div class="card-content">
        <div>
          <p class="label">Yield média (amostra)</p>
          <p class="value" id="anYieldMedia">0%</p>
        </div>
        <div class="icon-box"><i class="fas fa-percentage"></i></div>
      </div>
    </div>
    <div class="card premium">
      <div class="card-content">
        <div>
          <p class="label">P/E médio (amostra)</p>
          <p class="value" id="anPEmedio">0.0</p>
        </div>
        <div class="icon-box"><i class="fas fa-balance-scale"></i></div>
      </div>
    </div>
  </div>

  <!-- GRÁFICOS -->
  <div class="analysis-charts">
    <div class="card">
      <h3>Distribuição por Setor (nº de tickers)</h3>
      <div class="chart-wrap"><canvas id="anChartSetor"></canvas></div>
    </div>
    <div class="card">
      <h3>Distribuição por Mercado (nº de tickers)</h3>
      <div class="chart-wrap"><canvas id="anChartMercado"></canvas></div>
    </div>
    <div class="card">
      <h3>Yield vs P/E (scatter)</h3>
      <div class="chart-wrap"><canvas id="anChartYieldPE"></canvas></div>
    </div>
  </div>

  <div class="card">
  <!-- 🔎 TOOLBAR POR CIMA DA TABELA -->
  <div class="analysis-toolbar">
    <!-- Linha 1: pesquisa (sempre 100%) -->
    <div class="toolbar-row">
      <input id="anSearch" type="search" placeholder="Pesquisar por ticker / nome…" />
    </div>

    <!-- Linha 2: filtros + ordenar (100%; em desktop distribui em colunas largas) -->
    <div class="toolbar-row toolbar-grid">
      <select id="anFiltroSetor"    title="Filtrar por setor"><option value="">Todos os setores</option></select>
      <select id="anFiltroMercado"  title="Filtrar por mercado"><option value="">Todos os mercados</option></select>
      <select id="anOrdenar"        title="Ordenar resultados">
        <option value="ticker.asc">Ticker (A→Z)</option>
        <option value="yield.desc">Yield ↓</option>
        <option value="pe.asc">P/E ↑</option>
        <option value="delta200.desc">Δ200d% ↓</option>
      </select>
    </div>
  </div>

  <!-- TABELA -->
        <div class="table-scroll">
          <table class="fine-table">
            <thead>
              <tr>
                <th class="sticky-col">Ticker</th>
                <th>Nome</th>
                <th data-sort="yield">Yield</th>
                <th>Yield 24m</th>
                <th data-sort="pe">P/E</th>
                <th>Δ50d%</th>
                <th data-sort="delta200">Δ200d%</th>
                <th>1S</th>
                <th>1M</th>
                <th>1A</th>
                <th>Periodicidade</th>
                <th>Mês típico</th>
                <th>Notas</th>
              </tr>
            </thead>
            <tbody id="analysisTableBody"></tbody>
          </table>
        </div>
      </div>
      </div>
    </div>
  </div>
</div>
